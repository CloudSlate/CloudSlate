<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <meta name="googlebot" content="noindex, nofollow">
    <title>CloudSlate</title>
    
    <!-- Tailwind CSS -->
    <!-- Using jsdelivr CDN directly to avoid redirect issues -->
    <script src="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.0/dist/tailwind.min.js"></script>
    <script>
        // Fallback if Tailwind CDN fails
        if (typeof tailwind === 'undefined') {
            console.warn('Tailwind CDN failed, using CSS fallback');
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = 'https://cdn.jsdelivr.net/npm/tailwindcss@3.4.0/dist/tailwind.min.css';
            document.head.appendChild(link);
        }
    </script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/admin.css">
    <link rel="stylesheet" href="assets/css/icons.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    
    <!-- Favicon -->
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/images/android-chrome-512x512.png">
    <link rel="manifest" href="assets/images/site.webmanifest">
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <!-- Login Screen -->
    <div id="login-screen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">CloudSlate</h1>
                <p class="text-gray-600 dark:text-gray-400">Sign in to continue</p>
            </div>
            <form id="login-form" class="space-y-6">
                <div>
                    <label for="admin-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Password
                    </label>
                    <input type="password" id="admin-password" required
                           class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <button type="submit" 
                        class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition">
                    Sign In
                </button>
            </form>
            <div id="login-error" class="mt-4 text-red-600 dark:text-red-400 text-sm text-center hidden"></div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-dashboard" class="hidden">
        <!-- Sidebar -->
        <aside class="fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 z-40">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">CloudSlate</h2>
                <p class="text-sm text-gray-600 dark:text-gray-400">Dashboard</p>
            </div>
            <nav class="p-4 space-y-2">
                <a href="#" data-section="dashboard" class="admin-nav-item active flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    <span class="icon-wrapper icon-md icon-dashboard">${Icons.dashboard}</span> Dashboard
                </a>
                <a href="#" data-section="posts" class="admin-nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    <span class="icon-wrapper icon-md icon-document">${Icons.document}</span> Posts
                </a>
                <a href="#" data-section="new-post" class="admin-nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    <span class="icon-wrapper icon-md icon-plus">${Icons.plus}</span> New Post
                </a>
                <a href="#" data-section="categories" class="admin-nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    <span class="icon-wrapper icon-md icon-tag">${Icons.tag}</span> Categories
                </a>
                <a href="#" data-section="settings" class="admin-nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    <span class="icon-wrapper icon-md icon-settings">${Icons.settings}</span> Settings
                </a>
            </nav>
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 dark:border-gray-700">
                <div class="mb-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-xs text-yellow-800 dark:text-yellow-200 text-center flex items-center justify-center gap-2">
                    <span class="icon-wrapper icon-sm icon-lock">${Icons.lock}</span> Keep this URL private
                </div>
                <button id="logout-btn" class="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center justify-center gap-2">
                    <span class="icon-wrapper icon-sm icon-logout">${Icons.logout}</span> Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="ml-64 p-8">
            <!-- Header -->
            <header class="mb-8 flex justify-between items-center">
                <h1 id="page-title" class="text-3xl font-bold text-gray-900 dark:text-white">Dashboard</h1>
                <div class="flex items-center gap-4">
                    <a href="index.html" target="_blank" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                        View Site
                    </a>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="section-dashboard" class="admin-section">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="group bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-100 text-sm font-semibold mb-1">Total Posts</p>
                                <p id="stat-total-posts" class="text-4xl font-bold text-white">0</p>
                            </div>
                            <div class="text-5xl opacity-80">üìù</div>
                        </div>
                    </div>
                    <div class="group bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-100 text-sm font-semibold mb-1">Published</p>
                                <p id="stat-published" class="text-4xl font-bold text-white">0</p>
                            </div>
                            <div class="text-5xl opacity-80">‚úÖ</div>
                        </div>
                    </div>
                    <div class="group bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-100 text-sm font-semibold mb-1">Categories</p>
                                <p id="stat-categories" class="text-4xl font-bold text-white">0</p>
                            </div>
                            <div class="text-5xl opacity-80">üè∑Ô∏è</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border-2 border-gray-100 dark:border-gray-700">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Recent Posts</h2>
                        <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full text-sm font-semibold">Latest</span>
                    </div>
                    <div id="recent-posts-list" class="space-y-4">
                        <!-- Recent posts will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Posts Section -->
            <section id="section-posts" class="admin-section hidden">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                    <div class="p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                        <h2 class="text-xl font-bold text-gray-900 dark:text-white">All Posts</h2>
                        <div class="flex gap-3">
                            <input type="text" id="search-posts" placeholder="Search posts..." 
                                   class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white">
                            <button id="export-posts" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
                                Export
                            </button>
                            <button id="import-posts" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                Import
                            </button>
                            <input type="file" id="import-file" accept=".json" class="hidden">
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50 dark:bg-gray-700">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Title</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Category</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Featured</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="posts-table-body" class="divide-y divide-gray-200 dark:divide-gray-700">
                                <!-- Posts will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- New/Edit Post Section -->
            <section id="section-new-post" class="admin-section hidden">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <form id="post-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="post-title" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Title *
                                </label>
                                <input type="text" id="post-title" required
                                       class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label for="post-slug" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Slug *
                                </label>
                                <input type="text" id="post-slug" required
                                       class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>

                        <div>
                            <label for="post-excerpt" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Excerpt *
                            </label>
                            <textarea id="post-excerpt" rows="3" required
                                      class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>

                        <div>
                            <label for="post-content" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Content (Markdown) *
                            </label>
                            <textarea id="post-content" rows="15" required
                                      class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"></textarea>
                            <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Use Markdown syntax for formatting</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="post-category" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Category *
                                </label>
                                <input type="text" id="post-category" required list="categories-list"
                                       class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <datalist id="categories-list"></datalist>
                            </div>
                            <div>
                                <label for="post-tags" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Tags (comma-separated)
                                </label>
                                <input type="text" id="post-tags" placeholder="tag1, tag2, tag3"
                                       class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label for="post-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Date *
                                </label>
                                <input type="date" id="post-date" required
                                       class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label for="post-author" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Author *
                                </label>
                                <input type="text" id="post-author" required
                                       class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label for="post-read-time" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Read Time
                                </label>
                                <input type="text" id="post-read-time" placeholder="5 min read"
                                       class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="post-image" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Image URL
                                </label>
                                <input type="url" id="post-image" placeholder="https://images.unsplash.com/..."
                                       class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div class="flex items-end">
                                <label class="flex items-center gap-3 cursor-pointer">
                                    <input type="checkbox" id="post-featured" 
                                           class="w-5 h-5 rounded border-gray-300 dark:border-gray-700 text-blue-600 focus:ring-2 focus:ring-blue-500">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Featured Post</span>
                                </label>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button type="submit" id="save-post-btn" 
                                    class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition">
                                Save Post
                            </button>
                            <button type="button" id="preview-post-btn" 
                                    class="px-6 py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition">
                                Preview
                            </button>
                            <button type="button" id="cancel-edit-btn" class="px-6 py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition hidden">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Categories Section -->
            <section id="section-categories" class="admin-section hidden">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Categories</h2>
                    <div id="categories-list" class="space-y-3">
                        <!-- Categories will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="section-settings" class="admin-section hidden">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 space-y-6">
                    <div>
                        <h2 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Admin Settings</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="admin-password-change" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    Change Admin Password
                                </label>
                                <div class="flex gap-3">
                                    <input type="password" id="admin-password-change" placeholder="New password"
                                           class="flex-1 px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <button id="change-password-btn" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                        Change
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h2 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Data Management</h2>
                        <div class="space-y-3">
                            <button id="export-all-btn" class="w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
                                Export All Data
                            </button>
                            <button id="import-all-btn" class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                Import Data
                            </button>
                            <button id="clear-all-btn" class="w-full px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
                                Clear All Data
                            </button>
                            <input type="file" id="import-all-file" accept=".json" class="hidden">
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Preview Modal -->
    <div id="preview-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Post Preview</h2>
                <button id="close-preview" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    ‚úï
                </button>
            </div>
            <div id="preview-content" class="p-6">
                <!-- Preview content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="assets/js/icons.js"></script>
    <script src="assets/js/performance.js"></script>
    <!-- Cloudflare Workers API integration -->
    <script src="assets/js/admin-api.js"></script>
    <script src="assets/js/admin.js"></script>
    <script src="assets/js/theme.js"></script>
</body>
</html>

